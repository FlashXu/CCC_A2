{"remainingRequest":"/Users/taylor/Documents/COMP90024/A2/COMP90024-2019S1-Team7-TrackerHub-master/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/taylor/Documents/COMP90024/A2/COMP90024-2019S1-Team7-TrackerHub-master/frontend/src/views/Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/taylor/Documents/COMP90024/A2/COMP90024-2019S1-Team7-TrackerHub-master/frontend/src/views/Map.vue","mtime":1561893340000},{"path":"/Users/taylor/Documents/COMP90024/A2/COMP90024-2019S1-Team7-TrackerHub-master/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/taylor/Documents/COMP90024/A2/COMP90024-2019S1-Team7-TrackerHub-master/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/taylor/Documents/COMP90024/A2/COMP90024-2019S1-Team7-TrackerHub-master/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/taylor/Documents/COMP90024/A2/COMP90024-2019S1-Team7-TrackerHub-master/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCYXJjaGFydCBmcm9tICcuLy4uL2NvbXBvbmVudHMvQmFyY2hhcnQnCmltcG9ydCBMaW5lY2hhcnQgZnJvbSAnLi8uLi9jb21wb25lbnRzL0xpbmVjaGFydCcKaW1wb3J0IFBpZWNoYXJ0IGZyb20gJy4vLi4vY29tcG9uZW50cy9QaWVjaGFydCcKaW1wb3J0IFJhZGFyY2hhcnQgZnJvbSAnLi8uLi9jb21wb25lbnRzL1JhZGFyY2hhcnQnCmltcG9ydCB7bWFwU3R5bGV9IGZyb20gJy4vLi4vYXNzZXRzL2pzL21hcC1zdHlsZScKaW1wb3J0IHtDb25zdH0gZnJvbSAnLi8uLi9hc3NldHMvanMvY29uc3QnCmltcG9ydCBJbmZvV2luZG93Q29tcG9uZW50IGZyb20gJy4vSW5mb1dpbmRvdycKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnCmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5jc3MnCmltcG9ydCB7RGF0ZXRpbWV9IGZyb20gJ3Z1ZS1kYXRldGltZScKaW1wb3J0ICd2dWUtZGF0ZXRpbWUvZGlzdC92dWUtZGF0ZXRpbWUuY3NzJwppbXBvcnQgTG9hZGluZyBmcm9tICd2dWUtbG9hZGluZy1vdmVybGF5JwppbXBvcnQgJ3Z1ZS1sb2FkaW5nLW92ZXJsYXkvZGlzdC92dWUtbG9hZGluZy5jc3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2dtYXAnLAogIGNvbXBvbmVudHM6IHsKICAgIFJhZGFyY2hhcnQsCiAgICBQaWVjaGFydCwKICAgIExpbmVjaGFydCwKICAgIEJhcmNoYXJ0LAogICAgZGF0ZXRpbWU6IERhdGV0aW1lLAogICAgTG9hZGluZwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgcGllRGF0YTogWzQsNSw2LDddLAogICAgICBiYXJEYXRhOiBbXSwKICAgICAgYmFyRGF0YUxhYmVsOiBbXSwKICAgICAgcmFkYXJEYXRhOiBbXSwKICAgICAgbGluZURhdGE6IFtdLAoKICAgICAgbWFjaGluZURhdGFjb2xsZWN0aW9uX2x1c3Q6IG51bGwsCiAgICAgIG1hY2hpbmVEYXRhY29sbGVjdGlvbl9nbHV0dG9ueTogbnVsbCwKICAgICAgdGV4dERhdGFjb2xsZWN0aW9uOm51bGwsCiAgICAgIHNlbnRpbWVudERhdGFjb2xsZWN0aW9uOiBudWxsLAogICAgICBiYXJEYXRhY29sbGVjdGlvbjogbnVsbCwKCiAgICAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKCkudG9TdHJpbmcoKSwKICAgICAgZW5kX3RpbWU6IG5ldyBEYXRlKCkudG9TdHJpbmcoKSwKICAgICAgdXNlcl9pZDogJycsCiAgICAgIG51bWJlcjogMSwKICAgICAgc2tpcDogMCwKICAgICAgdmljX2dlbzogJ2h0dHBzOi8vZGF0YS5nb3YuYXUvZ2Vvc2VydmVyL3ZpYy1sb2NhbC1nb3Zlcm5tZW50LWFyZWFzLXBzbWEtYWRtaW5pc3RyYXRpdmUtYm91bmRhcmllcy93ZnM/cmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVOYW1lPWNrYW5fYmRmOTI2OTFfYzZmZV80MmI5X2EwZTJfYTRjZDcxNmZhODExJm91dHB1dEZvcm1hdD1qc29uJywKICAgICAgbWVsYl9nZW86ICdodHRwczovL2RhdGEuZ292LmF1L2dlb3NlcnZlci92aWMtbG9jYWwtZ292ZXJubWVudC1hcmVhcy1wc21hLWFkbWluaXN0cmF0aXZlLWJvdW5kYXJpZXMvd2ZzP3JlcXVlc3Q9R2V0RmVhdHVyZSZ0eXBlTmFtZT1ja2FuX2JkZjkyNjkxX2M2ZmVfNDJiOV9hMGUyX2E0Y2Q3MTZmYTgxMSZvdXRwdXRGb3JtYXQ9anNvbicsCiAgICAgIHRhZ3M6IG51bGwsCiAgICAgIHNlbGVjdGlvbnM6IFsKICAgICAgICB7IGtleTogJ2x1c3QnLCB0ZXh0OiAnTHVzdCcsIHZhbHVlOiAnbHVzdCcgfSwKICAgICAgICB7IGtleTogJ2dsdXR0b255JywgdGV4dDogJ0dsdXR0b255JywgdmFsdWU6ICdnbHV0dG9ueScgfSwKICAgICAgICB7IGtleTogJ3RleHQnLCB0ZXh0OiAnVGV4dCcsIHZhbHVlOiAndGV4dCcgfSwKICAgICAgICB7IGtleTogJ3NlbnRpbWVudCcsIHRleHQ6ICdTZW50aW1lbnQnLCB2YWx1ZTogJ3NlbnRpbWVudCcgfQogICAgICBdCiAgICB9CiAgfSwKCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLm1hcEluaXQoKQogICAgdGhpcy5jaGFydEJ1aWxkTWFjaGluZSgpCiAgICB0aGlzLmNoYXJ0QnVpbGRUZXh0KCkKICB9LAogIAogIG1ldGhvZHM6IHsKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09IEluaXQgTWFwID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICBtYXBJbml0KCl7CiAgICAgIGxldCBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXBfY2FudmFzJyksIHsKICAgICAgICB6b29tOiAxMywKICAgICAgICBjZW50ZXI6ICB7bGF0OiAtMzcuNzk5OCwgbG5nOiAxNDQuOTQ2MH0sCiAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSwKICAgICAgICBzdHlsZXM6IG1hcFN0eWxlCiAgICAgIH0pCiAgICAgIAogICAgICBsZXQgaW5mb3dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCkKCiAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PUljb24gZXhhbXBsZXM9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgIGxldCBpY29uID0gewogICAgICAgIHBhdGg6IENvbnN0LnN2Z19sdXN0LAogICAgICAgIGZpbGxDb2xvcjogJyNmZjk5MDAnLAogICAgICAgIGZpbGxPcGFjaXR5OiAxLAogICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDI1MCwyNTApLAogICAgICAgIHN0cm9rZVdlaWdodDogMCwgCiAgICAgICAgc2NhbGU6IC4xCiAgICAgIH0KICAgICAgICAgICAgCiAgICAgIGxldCBpY29uMiA9IHsKICAgICAgICBwYXRoOiBDb25zdC5zdmdfZ2x1dHRvbnksCiAgICAgICAgZmlsbENvbG9yOiAnI2ZmOTkwMCcsCiAgICAgICAgZmlsbE9wYWNpdHk6IDEsCiAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMjUwLDI1MCksCiAgICAgICAgc3Ryb2tlV2VpZ2h0OiAwLCAKICAgICAgICBzY2FsZTogLjEKICAgICAgfQoKICAgICAgbGV0IGljb24zID0gewogICAgICAgIHBhdGg6IENvbnN0LnN2Z19uZXV0cmFsLAogICAgICAgIGZpbGxDb2xvcjogJyNmZjk5MDAnLAogICAgICAgIGZpbGxPcGFjaXR5OiAxLAogICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDI1MCwyNTApLAogICAgICAgIHN0cm9rZVdlaWdodDogMCwgCiAgICAgICAgc2NhbGU6IC4xCiAgICAgIH0KICAgICAgICAgICAgCiAgICAgIGxldCBpY29uNCA9IHsKICAgICAgICBwYXRoOiBDb25zdC5zdmdfcG9zaXRpdmUsCiAgICAgICAgZmlsbENvbG9yOiAnI2ZmOTkwMCcsCiAgICAgICAgZmlsbE9wYWNpdHk6IDEsCiAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMjUwLDI1MCksCiAgICAgICAgc3Ryb2tlV2VpZ2h0OiAwLCAKICAgICAgICBzY2FsZTogLjEKICAgICAgfQoKICAgICAgbGV0IGljb241ID0gewogICAgICAgIHBhdGg6IENvbnN0LnN2Z19uZWdhdGl2ZSwKICAgICAgICBmaWxsQ29sb3I6ICcjZmY5OTAwJywKICAgICAgICBmaWxsT3BhY2l0eTogMSwKICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgyNTAsMjUwKSwKICAgICAgICBzdHJva2VXZWlnaHQ6IDAsIAogICAgICAgIHNjYWxlOiAuMQogICAgICB9CgogICAgICBsZXQgbXlGb29kTWFyayA9IHtsYXQ6IC0zNy44MDM2LCBsbmc6IDE0NC45NjMxfQogICAgICBsZXQgbXlMdXN0TWFyayA9IHtsYXQ6IC0zNy44MTM2LCBsbmc6IDE0NC45NjMxfQogICAgICBsZXQgbXlOb3JtYWxNYXJrID0ge2xhdDogLTM3LjgwMzYsIGxuZzogMTQ0Ljk1MzF9CiAgICAgIGxldCBteVBvc2l0aXZlTWFyayA9IHtsYXQ6IC0zNy44MTM2LCBsbmc6IDE0NC45NzMxfQogICAgICBsZXQgbXlOZWdhdGl2ZU1hcmsgPSB7bGF0OiAtMzcuODIzNiwgbG5nOiAxNDQuOTYzMX0KCiAgICAgIGxldCBmb29kTWFyayA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoewogICAgICAgIHBvc2l0aW9uOiBteUZvb2RNYXJrLAogICAgICAgIG1hcDogbWFwLAogICAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSwKICAgICAgICB0aXRsZTogJ0hlbGxvIEZvb2QhJywKICAgICAgICBpY29uOiBpY29uMgogICAgICB9KQoKICAgICAgbGV0IGx1c3RNYXJrID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7CiAgICAgICAgcG9zaXRpb246IG15THVzdE1hcmssCiAgICAgICAgbWFwOiBtYXAsCiAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uQk9VTkNFLAogICAgICAgIHRpdGxlOiAnSGVsbG8gTHVzdCEnLAogICAgICAgIGljb246IGljb24KICAgICAgfSkKCiAgICAgIGxldCB3YXJ0aE1hcmsgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHsKICAgICAgICBwb3NpdGlvbjogbXlOb3JtYWxNYXJrLAogICAgICAgIG1hcDogbWFwLAogICAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSwKICAgICAgICB0aXRsZTogJ0hlbGxvIE5vcm1hbCEnLAogICAgICAgIGljb246IGljb24zCiAgICAgIH0pCgogICAgICBsZXQgcG9zaXRpdmVNYXJrID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7CiAgICAgICAgcG9zaXRpb246IG15UG9zaXRpdmVNYXJrLAogICAgICAgIG1hcDogbWFwLAogICAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSwKICAgICAgICB0aXRsZTogJ0hlbGxvIFBvc2l0aXZlIScsCiAgICAgICAgaWNvbjogaWNvbjQKICAgICAgfSkKCiAgICAgIGxldCBuZWdhdGl2ZU1hcmsgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHsKICAgICAgICBwb3NpdGlvbjogbXlOZWdhdGl2ZU1hcmssCiAgICAgICAgbWFwOiBtYXAsCiAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uQk9VTkNFLAogICAgICAgIHRpdGxlOiAnSGVsbG8gTmVnYXRpdmUhJywKICAgICAgICBpY29uOiBpY29uNQogICAgICB9KQoKICAgICAgcG9zaXRpdmVNYXJrLmFkZExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgIGxldCBjb250ZW50ID0gJzxkaXYgaWQ9ImNvbnRlbnQiIHN0eWxlPSJtaW4td2lkdGg6MTUwcHg7Ij4nKwogICAgICAgICAgICAgICAgICAgICAgJzxwPlRhZ3M8L3A+JysKICAgICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLWRhcmsiPnBvc2l0aXZlPC9idXR0b24+JysKICAgICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLXdhcm5pbmciPnBvc2l0aXZlPC9idXR0b24+JysKICAgICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiPnBvc2l0aXZlPC9idXR0b24+JysKICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nOwogICAgICAgIAogICAgICAgIGluZm93aW5kb3cuc2V0Q29udGVudChjb250ZW50KQogICAgICAgIGluZm93aW5kb3cub3BlbihtYXAsIHBvc2l0aXZlTWFyaykKICAgICAgfSkKICAgIH0sCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gU2hvdyBhdXJpbiBkYXRhIG9uIG1hcCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIG1hcEF1cmluKHR5cGUpewogICAgICB0aGlzLnZpc2libGU9dHJ1ZQogICAgICBsZXQgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwX2NhbnZhcycpLCB7CiAgICAgICAgem9vbTogMTIsCiAgICAgICAgY2VudGVyOiAge2xhdDogLTM3Ljc5OTgsIGxuZzogMTQ0Ljk0NjB9LAogICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWUsCiAgICAgICAgc3R5bGVzOiBtYXBTdHlsZQogICAgICB9KQogICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UobWFwLCAnaWRsZScsICgpID0+IHsKICAgICAgICB0aGlzLnZpc2libGU9ZmFsc2UKICAgICAgfSkKICAgICAgbGV0IGNvbG9ycyA9IHRoaXMuZ3JhZGllbnQoJyNmZmZmZmYnLCcjZmY5OTAwJyw3KQoKICAgICAgbWFwLmRhdGEubG9hZEdlb0pzb24odGhpcy52aWNfZ2VvKQogICAgICBtYXAuZGF0YS5zZXRTdHlsZSgoZmVhdHVyZSkgPT4gewogICAgICAgIGxldCBuYW1lID0gZmVhdHVyZS5nZXRQcm9wZXJ0eSgndmljX2xnYV9fMycpCiAgICAgICAgbGV0IHRvdGFsID0gMAoKICAgICAgICBpZiAoQ29uc3QuYXVyaW5bYCR7bmFtZX1gXSl7CiAgICAgICAgICBpZiAoQ29uc3QuYXVyaW5bYCR7bmFtZX1gXVtgJHt0eXBlWzBdfWBdW2Ake3R5cGVbMV19YF0pewogICAgICAgICAgICB0b3RhbCA9IENvbnN0LmF1cmluW2Ake25hbWV9YF1bYCR7dHlwZVswXX1gXVtgJHt0eXBlWzFdfWBdCiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBsZXQgY29sb3IgPSAnIzAwMDAwMCcKICAgICAgICBpZiAodG90YWwgPiAxKQogICAgICAgICAgY29sb3IgPSBjb2xvcnNbMF0KICAgICAgICBpZiAodG90YWwgPiAxMDAwKQogICAgICAgICAgY29sb3IgPSBjb2xvcnNbMV0KICAgICAgICBpZiAodG90YWwgPiAzMDAwKQogICAgICAgICAgY29sb3IgPSBjb2xvcnNbMl0KICAgICAgICBpZiAodG90YWwgPiA1MDAwKQogICAgICAgICAgY29sb3IgPSBjb2xvcnNbM10KICAgICAgICBpZiAodG90YWwgPiAxMDAwMCkKICAgICAgICAgIGNvbG9yID0gY29sb3JzWzRdCiAgICAgICAgaWYgKHRvdGFsID4gMTUwMDApCiAgICAgICAgICBjb2xvciA9IGNvbG9yc1s1XQogICAgICAgIGlmICh0b3RhbCA+IDIwMDAwKQogICAgICAgICAgY29sb3IgPSBjb2xvcnNbNl0gIAoKICAgICAgICByZXR1cm4gewogICAgICAgICAgZmlsbENvbG9yOiBjb2xvciwKICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICBzdHJva2VXZWlnaHQ6IDEKICAgICAgICB9CiAgICAgIH0pCiAKICAgIH0sCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gQnVpbGQgTWFwID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIG1hcEJ1aWxkKHNjb3BlKXsKICAgICAgbGV0IG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcF9jYW52YXMnKSwgewogICAgICAgIHpvb206IDEyLAogICAgICAgIGNlbnRlcjogIHtsYXQ6IC0zNy43OTk4LCBsbmc6IDE0NC45NDYwfSwKICAgICAgICBkaXNhYmxlRGVmYXVsdFVJOiB0cnVlLAogICAgICAgIHN0eWxlczogbWFwU3R5bGUKICAgICAgfSkKCiAgICAgIGxldCBpbmZvd2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coKQogICAgICBsZXQgbWFya2VyLCBpCiAgICAgIGxldCBtYXJrZXJzID0gW10KICAgICAgbGV0IGxvY2F0aW9ucyA9IFtdCiAgICAgIGxldCBjb2xvcnMgPSB0aGlzLmdyYWRpZW50KCcjZmZmZmZmJywnI2ZmOTkwMCcsNykKICAgICAKCiAgICAgIHRoaXMuYmFyRGF0YUxhYmVsLmxlbmd0aD0wCiAgICAgIHRoaXMuYmFyRGF0YS5sZW5ndGg9MAoKICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IFNldHVwIGVhY2ggcmVnaW9uLyBDb2xsZWN0IGJhciBkYXRhID09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgIC8vIHNldCBzdHlsZSBmb3IgZWFjaCByZWdpb24KICAgICAgbWFwLmRhdGEubG9hZEdlb0pzb24odGhpcy5tZWxiX2dlbykKICAgICAgaWYgKHNjb3BlID09ICdtZWxiJykgewogICAgICAgIG1hcC5kYXRhLnNldFN0eWxlKChmZWF0dXJlKSA9PiB7CiAgICAgICAgICBsZXQgdG90YWwgPSBmZWF0dXJlLmdldFByb3BlcnR5KCd0b3RhbCcpCiAgICAgICAgICBsZXQgbmFtZSA9IGZlYXR1cmUuZ2V0UHJvcGVydHkoJ25hbWUnKQoKICAgICAgICAgIGlmICghdGhpcy5iYXJEYXRhTGFiZWwuaW5jbHVkZXMobmFtZSkpewogICAgICAgICAgICB0aGlzLmJhckRhdGFMYWJlbC5wdXNoKG5hbWUpCiAgICAgICAgICAgIHRoaXMuYmFyRGF0YS5wdXNoKHRvdGFsKQogICAgICAgICAgfQogICAgICAgICAgbGV0IGNvbG9yID0gJyMwMDAwMDAnCiAgICAgICAgICBpZiAodG90YWwgPiAxKQogICAgICAgICAgICBjb2xvciA9IGNvbG9yc1swXQogICAgICAgICAgaWYgKHRvdGFsID4gMTAwKQogICAgICAgICAgICBjb2xvciA9IGNvbG9yc1sxXQogICAgICAgICAgaWYgKHRvdGFsID4gMzAwKQogICAgICAgICAgICBjb2xvciA9IGNvbG9yc1syXQogICAgICAgICAgaWYgKHRvdGFsID4gNTAwKQogICAgICAgICAgICBjb2xvciA9IGNvbG9yc1szXQogICAgICAgICAgaWYgKHRvdGFsID4gMTAwMCkKICAgICAgICAgICAgY29sb3IgPSBjb2xvcnNbNF0KICAgICAgICAgIGlmICh0b3RhbCA+IDE1MDApCiAgICAgICAgICAgIGNvbG9yID0gY29sb3JzWzVdCiAgICAgICAgICBpZiAodG90YWwgPiAyMDAwKQogICAgICAgICAgICBjb2xvciA9IGNvbG9yc1s2XSAgCgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZmlsbENvbG9yOiBjb2xvciwKICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgc3Ryb2tlV2VpZ2h0OiAxCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICAgbWFwLmRhdGEuc2V0U3R5bGUoKGZlYXR1cmUpID0+IHsKICAgICAgICAgIGxldCB0b3RhbCA9IGZlYXR1cmUuZ2V0UHJvcGVydHkoJ3RvdGFsJykKICAgICAgICAgIGxldCBuYW1lID0gZmVhdHVyZS5nZXRQcm9wZXJ0eSgnbmFtZScpCgogICAgICAgICAgaWYgKCF0aGlzLmJhckRhdGFMYWJlbC5pbmNsdWRlcyhuYW1lKSl7CiAgICAgICAgICAgIHRoaXMuYmFyRGF0YUxhYmVsLnB1c2gobmFtZSkKICAgICAgICAgICAgdGhpcy5iYXJEYXRhLnB1c2godG90YWwpCiAgICAgICAgICB9CiAgICAgICAgICBsZXQgY29sb3IgPSAnIzAwMDAwMCcKICAgICAgICAgIGlmICh0b3RhbCA+IDEpCiAgICAgICAgICAgIGNvbG9yID0gY29sb3JzWzBdCiAgICAgICAgICBpZiAodG90YWwgPiAxMDAwKQogICAgICAgICAgICBjb2xvciA9IGNvbG9yc1sxXQogICAgICAgICAgaWYgKHRvdGFsID4gMzAwMCkKICAgICAgICAgICAgY29sb3IgPSBjb2xvcnNbMl0KICAgICAgICAgIGlmICh0b3RhbCA+IDUwMDApCiAgICAgICAgICAgIGNvbG9yID0gY29sb3JzWzNdCiAgICAgICAgICBpZiAodG90YWwgPiAxMDAwMCkKICAgICAgICAgICAgY29sb3IgPSBjb2xvcnNbNF0KICAgICAgICAgIGlmICh0b3RhbCA+IDE1MDAwKQogICAgICAgICAgICBjb2xvciA9IGNvbG9yc1s1XQogICAgICAgICAgaWYgKHRvdGFsID4gMjAwMDApCiAgICAgICAgICAgIGNvbG9yID0gY29sb3JzWzZdICAKCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBmaWxsQ29sb3I6IGNvbG9yLAogICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICBzdHJva2VXZWlnaHQ6IDEKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICAgIC8vIHNldHVwIGJhciBkYXRhCiAgICAgIHRoaXMuYmFyRGF0YWNvbGxlY3Rpb24gPSB7CiAgICAgICAgbGFiZWxzOiB0aGlzLmJhckRhdGFMYWJlbCwKICAgICAgICBkYXRhc2V0czogWwogICAgICAgICAgewogICAgICAgICAgICBsYWJlbDogJ1RvdGFsIFNpbnMnLAogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmY5OTAwJywKICAgICAgICAgICAgZGF0YTogdGhpcy5iYXJEYXRhCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CgogICAgICAvLyBtb3VzZSBjbGljayBldmVudDogc2hvdyBncmlkIGluZm8KICAgICAgbWFwLmRhdGEuYWRkTGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7CiAgICAgICAgLy8gcHJlcGFyZSBkYXRhCiAgICAgICAgbGV0IG5hbWUgPSBldmVudC5mZWF0dXJlLmdldFByb3BlcnR5KCJuYW1lIikKICAgICAgICBsZXQgc3RhdGlzdGljcyA9IGV2ZW50LmZlYXR1cmUuZ2V0UHJvcGVydHkoInN0YXRpc3RjcyIpCiAKICAgICAgICBsZXQgaW5mb1BpZURhdGFTZW50aW1lbnQgPSBbXSAKICAgICAgICBsZXQgaW5mb1BpZU5hbWVTZW50aW1lbnQgPSBbXQogICAgICAgIGxldCBpbmZvUGllRGF0YSA9IFtdCiAgICAgICAgbGV0IGluZm9QaWVOYW1lID0gW10KICAgICAgICBsZXQgdGVtcCA9ICdzZW50aW1lbnQnCgogICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHN0YXRpc3RpY3Muc2VudGltZW50KSkgewogICAgICAgICAgaW5mb1BpZU5hbWVTZW50aW1lbnQucHVzaChrZXkpCiAgICAgICAgICBpbmZvUGllRGF0YVNlbnRpbWVudC5wdXNoKHZhbHVlKQogICAgICAgIH0KCiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc3RhdGlzdGljcykpIHsKICAgICAgICAgIGlmIChrZXkgIT0gdGVtcCl7CiAgICAgICAgICAgIGZvcihjb25zdCBbaW5uZXJfa2V5LCBpbm5lcl92YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7CiAgICAgICAgICAgICAgaW5mb1BpZU5hbWUucHVzaChpbm5lcl9rZXkpCiAgICAgICAgICAgICAgaW5mb1BpZURhdGEucHVzaChpbm5lcl92YWx1ZSkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gc2V0IGFsbCBjaGFydCBkYXRhIGhlcmUKICAgICAgICBsZXQgcGllRGF0YWNvbGxlY3Rpb25fc2VudGltZW50ID0gewogICAgICAgICAgbGFiZWxzOiBpbmZvUGllTmFtZVNlbnRpbWVudCwKICAgICAgICAgIGRhdGFzZXRzOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBsYWJlbDogJ1NlbnRpbWVudCcsCiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmdyYWRpZW50KCcjRjVGNUY1JywnZmY5OTAwJyxpbmZvUGllRGF0YVNlbnRpbWVudC5sZW5ndGgpICwKICAgICAgICAgICAgICBkYXRhOiBpbmZvUGllRGF0YVNlbnRpbWVudAogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfQoKICAgICAgICBsZXQgcGllRGF0YWNvbGxlY3Rpb24gPSB7CiAgICAgICAgICBsYWJlbHM6IGluZm9QaWVOYW1lLAogICAgICAgICAgZGF0YXNldHM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIGxhYmVsOiAnU2luJywKICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuZ3JhZGllbnQoJyNGNUY1RjUnLCdmZjk5MDAnLGluZm9QaWVEYXRhLmxlbmd0aCkgLAogICAgICAgICAgICAgIGRhdGE6IGluZm9QaWVEYXRhCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gaW5pdCBpbmZvd2luZG93IHdpdGggY3VzdG9taXplZCB2aWV3CiAgICAgICAgbGV0IEluZm9XaW5kb3cgPSBWdWUuZXh0ZW5kKEluZm9XaW5kb3dDb21wb25lbnQpCiAgICAgICAgCiAgICAgICAgLy8gc2VuZCBkYXRhIHRvIHRoZSB2aWV3CiAgICAgICAgbGV0IGluc3RhbmNlID0gbmV3IEluZm9XaW5kb3coewogICAgICAgICAgcHJvcHNEYXRhOiB7CiAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgIHBpZURhdGFjb2xsZWN0aW9uX3NlbnRpbWVudCwKICAgICAgICAgICAgcGllRGF0YWNvbGxlY3Rpb24KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIAogICAgICAgIGluc3RhbmNlLiRtb3VudCgpCgogICAgICAgIGluZm93aW5kb3cuc2V0Q29udGVudChpbnN0YW5jZS4kZWwpCiAgICAgICAgLy9pbmZvd2luZG93LnNldFBvc2l0aW9uKGV2ZW50LmZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRBdCgwKS5nZXRBdCgwKS5nZXRBdCgwKSkKICAgICAgICBpbmZvd2luZG93LnNldFBvc2l0aW9uKGV2ZW50LmxhdExuZykKICAgICAgICAvL2luZm93aW5kb3cuc2V0T3B0aW9ucyh7cGl4ZWxPZmZzZXQ6IG5ldyBnb29nbGUubWFwcy5TaXplKDAsMCl9KQogICAgICAgIGluZm93aW5kb3cub3BlbihtYXApCiAgICAgIH0pCiAgICAgIAogICAgICAvLyBtb3VzZSBvdmVyIGV2ZW50OiBoaWdobGlnaHQgY29sb3IKICAgICAgbWFwLmRhdGEuYWRkTGlzdGVuZXIoJ21vdXNlb3ZlcicsIChldmVudCkgPT4gewogICAgICAgIG1hcC5kYXRhLm92ZXJyaWRlU3R5bGUoZXZlbnQuZmVhdHVyZSwge2ZpbGxDb2xvcjogJ2JsYWNrJ30pCiAgICAgIH0pCgogICAgICAvLyBtb3VzZSBvdXIgZXZlbnQ6IHJlc2V0IGNvbG9yL2luZm8td2luZG93CiAgICAgIG1hcC5kYXRhLmFkZExpc3RlbmVyKCdtb3VzZW91dCcsIChldmVudCkgPT4gewogICAgICAgIG1hcC5kYXRhLnJldmVydFN0eWxlKCkKICAgICAgICBpbmZvd2luZG93LmNsb3NlKCkKICAgICAgfSkKICAgIH0sCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PSBHZXQgTWFwIERhdGEgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIG1hcEJ1aWxkWm9uZSh6b25lLCBzY29wZSkgewogICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJGFqYXgoewogICAgICAgIHVybDogem9uZSwKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLm1lbGJfZ2VvID0gcmVzLmRhdGEudXJsLAogICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UsCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm1lbGJfZ2VvKSwKICAgICAgICAgIC8vIHJlLXJlbmRlciB0aGUgbWFwIGhlcmUKICAgICAgICAgIHRoaXMuZmxhc2goJ3N1Y2Nlc3MnLCAnc3VjY2Vzcycse3RpbWVvdXQ6IDMwMDB9KSwKICAgICAgICAgIHRoaXMubWFwQnVpbGQoc2NvcGUpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UsCiAgICAgICAgICB0aGlzLmZsYXNoKGAke2Vycm9yfWAsICdlcnJvcicpLAogICAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZQogICAgICB9KSAgICAKICAgIH0sCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PSBHZXQgTWFjaGluZSBMZWFybmluZyBEYXRhID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIGNoYXJ0QnVpbGRNYWNoaW5lKCkgewogICAgICB0aGlzLnZpc2lsYmUgPSB0cnVlCiAgICAgIHRoaXMuJGFqYXgoewogICAgICAgIHVybDogJy9hcGkvc3RhdGlzdGljcy9tYWNoaW5lLycsCiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubWFjaGluZURhdGFjb2xsZWN0aW9uX2x1c3QgPSB7CiAgICAgICAgICBsYWJlbHM6IHJlcy5kYXRhLmx1c3Qua2V5LAogICAgICAgICAgZGF0YXNldHM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIGxhYmVsOiAnTHVzdCcsCiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmdyYWRpZW50KCcjZmY5OTAwJywnI2ZmZmZmZicsIHJlcy5kYXRhLmx1c3Qua2V5Lmxlbmd0aCksCiAgICAgICAgICAgICAgZGF0YTogcmVzLmRhdGEubHVzdC52YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfQogICAgICAgIHRoaXMubWFjaGluZURhdGFjb2xsZWN0aW9uX2dsdXR0b255ID0gewogICAgICAgICAgbGFiZWxzOiByZXMuZGF0YS5nbHV0dG9ueS5rZXksCiAgICAgICAgICBkYXRhc2V0czogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbGFiZWw6ICdHbHV0dG9ueScsCiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmdyYWRpZW50KCcjZmY5OTAwJywnI2ZmZmZmZicsIHJlcy5kYXRhLmdsdXR0b255LmtleS5sZW5ndGgpLAogICAgICAgICAgICAgIGRhdGE6IHJlcy5kYXRhLmdsdXR0b255LnZhbHVlCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9CiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UKICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZSwKICAgICAgICB0aGlzLmZsYXNoKGAke2Vycm9yfWAsICdlcnJvcicpLAogICAgICAgIHRoaXMuZXJyb3JlZCA9IHRydWUKICAgICAgfSkgCiAgICB9LAoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0gR2V0IE5MUCBMZWFybmluZyBEYXRhID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICBjaGFydEJ1aWxkVGV4dCgpIHsKICAgICAgdGhpcy52aXNpbGJlID0gdHJ1ZQogICAgICB0aGlzLiRhamF4KHsKICAgICAgICB1cmw6ICcvYXBpL3N0YXRpc3RpY3MvdGV4dC8nLAogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgdGhpcy50ZXh0RGF0YWNvbGxlY3Rpb24gPSB7CiAgICAgICAgICBsYWJlbHM6IHJlcy5kYXRhLnRleHQua2V5LAogICAgICAgICAgZGF0YXNldHM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIGxhYmVsOiAnVGV4dCcsCiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmdyYWRpZW50KCcjZmY5OTAwJywnI2ZmZmZmZicsIHJlcy5kYXRhLnRleHQua2V5Lmxlbmd0aCksCiAgICAgICAgICAgICAgZGF0YTogcmVzLmRhdGEudGV4dC52YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfQogICAgICAgIHRoaXMuc2VudGltZW50RGF0YWNvbGxlY3Rpb24gPSB7CiAgICAgICAgICBsYWJlbHM6IHJlcy5kYXRhLnNlbnRpbWVudC5rZXksCiAgICAgICAgICBkYXRhc2V0czogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbGFiZWw6ICdTZW50aW1lbnQnLAogICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5ncmFkaWVudCgnI0Y1RjVGNScsJ2ZmOTkwMCcsIHJlcy5kYXRhLnNlbnRpbWVudC5rZXkubGVuZ3RoKSwKICAgICAgICAgICAgICBkYXRhOiByZXMuZGF0YS5zZW50aW1lbnQudmFsdWUKICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0KICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQogICAgICB9KQogICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlLAogICAgICAgIHRoaXMuZmxhc2goYCR7ZXJyb3J9YCwgJ2Vycm9yJyksCiAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZQogICAgICB9KSAKICAgIH0sCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PSBUcmFjayAxIFVzZXIgYnkgSUQgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIG1hcEJ1aWxkVHJhY2soKXsKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZQogICAgICBsZXQgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwX2NhbnZhcycpLCB7CiAgICAgICAgem9vbTogMTMsCiAgICAgICAgY2VudGVyOiAge2xhdDogLTM3Ljc5OTgsIGxuZzogMTQ0Ljk0NjB9LAogICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWUsCiAgICAgICAgc3R5bGVzOiBtYXBTdHlsZQogICAgICB9KQoKICAgICAgbGV0IGluZm93aW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdygpCiAgICAgIGxldCBwYXRoID0gW10KICAgICAgbGV0IHNEYXRlID0gbmV3IERhdGUodGhpcy5zdGFydF90aW1lKQogICAgICBsZXQgZURhdGUgPSBuZXcgRGF0ZSh0aGlzLmVuZF90aW1lKQogICAgICBsZXQgc3RhcnRfdGltZSA9IHRoaXMudG9JU09Mb2NhbChzRGF0ZSkucmVwbGFjZSgvVC9nLCAiICIpLAogICAgICAgICAgZW5kX3RpbWUgPSB0aGlzLnRvSVNPTG9jYWwoZURhdGUpLnJlcGxhY2UoL1QvZywgIiAiKQogICAgICBsZXQgbm9EYXRhID0gZmFsc2UKCiAgICAgIGlmIChzdGFydF90aW1lLmluY2x1ZGVzKCdOYU4nKSB8fCBlbmRfdGltZS5pbmNsdWRlcygnTmFOJykpCiAgICAgICAgc3RhcnRfdGltZSA9IGVuZF90aW1lID0gbnVsbAogICAgICAgIAogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAvL3N0YXJ0X3RpbWU6ICcyMDE2LTAxLTA5IDEwOjAwOjAwKzEwMDAnLAogICAgICAgIC8vZW5kX3RpbWU6ICcyMDE2LTEwLTA5IDEwOjAwOjAwKzEwMDAnLAogICAgICAgIHN0YXJ0X3RpbWUsCiAgICAgICAgZW5kX3RpbWUsCiAgICAgICAgdGFnczogdGhpcy50YWdzLAogICAgICAgIHRocmVzaG9sZDogMC45CiAgICAgIH0KICAgICAgICAKICAgICAgY29uc29sZS5sb2coZGF0YSkKCiAgICAgIHRoaXMuJGFqYXgoewogICAgICAgIHVybDogYC9hcGkvc3RhdGlzdGljcy90cmFjay8ke3RoaXMudXNlcl9pZH0vYCwKICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICBkYXRhOiBkYXRhCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKCiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgICAgCiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlcy5kYXRhKS5sZW5ndGggPT09IDApCiAgICAgICAgICB0aGlzLmZsYXNoKCdubyBkYXRhIG1hdGNoIGN1cnJlbnQgcXVlcnknLCAnZXJyb3InKQogICAgICAgICAgbm9EYXRhID0gdHJ1ZQoKICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyZXMuZGF0YSkpIHsKICAgICAgICAgIGxldCBwb2ludCA9IHsKICAgICAgICAgICAgbGF0OiB2YWx1ZVswXS5nZW9bMV0sIAogICAgICAgICAgICBsbmc6IHZhbHVlWzBdLmdlb1swXQogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgICBwYXRoLnB1c2gocG9pbnQpCiAgICAgICAgICBsZXQgc3ZnX2ljb24gPSBDb25zdC5zdmdfbmV1dHJhbAoKICAgICAgICAgIGlmICh2YWx1ZVswXS50YWdzLnNlbnRpbWVudCl7CiAgICAgICAgICAgIGlmICh2YWx1ZVswXS50YWdzLnNlbnRpbWVudFswXSA9PSAncG9zaXRpdmUnKXsKICAgICAgICAgICAgICBzdmdfaWNvbiA9IENvbnN0LnN2Z19wb3NpdGl2ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh2YWx1ZVswXS50YWdzLnNlbnRpbWVudFswXSA9PSAnbmVnYXRpdmUnKXsKICAgICAgICAgICAgICBzdmdfaWNvbiA9IENvbnN0LnN2Z19uZWdhdGl2ZQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGljb24gPSB7CiAgICAgICAgICAgIHBhdGg6IHN2Z19pY29uLAogICAgICAgICAgICBmaWxsQ29sb3I6ICcjZmY5OTAwJywKICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDEsCiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDI1MCwyNTApLAogICAgICAgICAgICBzdHJva2VXZWlnaHQ6IDAsIAogICAgICAgICAgICBzY2FsZTogLjEKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7CiAgICAgICAgICAgIHBvc2l0aW9uOiBwb2ludCwKICAgICAgICAgICAgbWFwOiBtYXAsCiAgICAgICAgICAgIGljb246IGljb24sCiAgICAgICAgICAgIHRpdGxlOiB2YWx1ZVswXS50aW1lICsgdmFsdWVbMF0udGV4dAogICAgICAgICAgfSkKCiAgICAgICAgICBsZXQgdGFnX2NvbnRlbnQgPSAnJwogICAgICAgIAogICAgICAgICAgZm9yIChjb25zdCBbbWFpblRhZywgc3ViVGFnc10gb2YgT2JqZWN0LmVudHJpZXModmFsdWVbMF0udGFncykpewogICAgICAgICAgICBzdWJUYWdzLmZvckVhY2godGFnID0+IHsKICAgICAgICAgICAgICB0YWdfY29udGVudCA9IHRhZ19jb250ZW50ICsgYDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBidG4tZGFyayI+JHt0YWd9PC9idXR0b24+YAogICAgICAgICAgICB9KQogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWx1ZVswXS5pbWdfaWQubGVuZ3RoPjApewogICAgICAgICAgICB2YWx1ZVswXS5pbWdfaWQuZm9yRWFjaChpbWcgPT4gewogICAgICAgICAgICAgIHRhZ19jb250ZW50ID0gdGFnX2NvbnRlbnQgKyBgPGEgY2xhc3M9ImJ0biBidG4td2FybmluZyIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly8xNzIuMjYuMzcuMjI1L2FwaS90d2VldC9waWMvJHtpbWd9Ij5JTUFHRTwvYT5gCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGNvbnRlbnQgPSAnPGRpdiBpZD0iY29udGVudCIgc3R5bGU9Im1pbi13aWR0aDoxNTBweDsiPicrCiAgICAgICAgICAgICc8aDQgY2xhc3M9ImZvbnQtd2VpZ2h0LWJvbGQiPicrIGtleSArJzwvaDQ+JysKICAgICAgICAgICAgdGFnX2NvbnRlbnQrCiAgICAgICAgICAgICc8L2Rpdj4nCgogICAgICAgICAgbWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgICAgIAogICAgICAgICAgICBpbmZvd2luZG93LnNldENvbnRlbnQoY29udGVudCkKICAgICAgICAgICAgaW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKQogICAgICAgICAgfSkKCiAgICAgICAgICB2YWx1ZS5zbGljZSgxKS5mb3JFYWNoKCh0cmFjaykgPT4gewogICAgICAgICAgICBzdmdfaWNvbiA9IENvbnN0LnN2Z19uZXV0cmFsCiAgICAgICAgICAgIGlmICh0cmFjay50YWdzLnNlbnRpbWVudCl7CiAgICAgICAgICAgICAgaWYgKHRyYWNrLnRhZ3Muc2VudGltZW50WzBdID09ICdwb3NpdGl2ZScpewogICAgICAgICAgICAgICAgc3ZnX2ljb24gPSBDb25zdC5zdmdfcG9zaXRpdmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHRyYWNrLnRhZ3Muc2VudGltZW50WzBdID09ICduZWdhdGl2ZScpewogICAgICAgICAgICAgICAgc3ZnX2ljb24gPSBDb25zdC5zdmdfbmVnYXRpdmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBpY29uX3NtPSB7CiAgICAgICAgICAgICAgcGF0aDogc3ZnX2ljb24sCiAgICAgICAgICAgICAgZmlsbENvbG9yOiAnI2ZmOTkwMCcsCiAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMjUwLDI1MCksCiAgICAgICAgICAgICAgc3Ryb2tlV2VpZ2h0OiAwLCAKICAgICAgICAgICAgICBzY2FsZTogLjA1CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHBvaW50ID0gewogICAgICAgICAgICAgIGxhdDogdHJhY2suZ2VvWzFdLCAKICAgICAgICAgICAgICBsbmc6IHRyYWNrLmdlb1swXQogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7CiAgICAgICAgICAgICAgcG9zaXRpb246IHBvaW50LAogICAgICAgICAgICAgIG1hcDogbWFwLAogICAgICAgICAgICAgIGljb246IGljb25fc20sCiAgICAgICAgICAgICAgdGl0bGU6IHRyYWNrLnRpbWUgKyB0cmFjay50ZXh0CiAgICAgICAgICAgIH0pCgogICAgICAgICAgICB0YWdfY29udGVudCA9ICcnCgogICAgICAgICAgICBmb3IgKGNvbnN0IFttYWluVGFnLCBzdWJUYWdzXSBvZiBPYmplY3QuZW50cmllcyh0cmFjay50YWdzKSl7CiAgICAgICAgICAgICAgc3ViVGFncy5mb3JFYWNoKHRhZyA9PiB7CiAgICAgICAgICAgICAgICB0YWdfY29udGVudCA9IHRhZ19jb250ZW50ICsgYDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBidG4tZGFyayI+JHt0YWd9PC9idXR0b24+YAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0cmFjay5pbWdfaWQubGVuZ3RoPjApewogICAgICAgICAgICAgIHRyYWNrLmltZ19pZC5mb3JFYWNoKGltZyA9PiB7CiAgICAgICAgICAgICAgICB0YWdfY29udGVudCA9IHRhZ19jb250ZW50ICsgYDxhIGNsYXNzPSJidG4gYnRuLXdhcm5pbmciIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwOi8vMTcyLjI2LjM3LjIyNS9hcGkvdHdlZXQvcGljLyR7aW1nfSI+SU1BR0U8L2E+YAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBjb250ZW50ID0gJzxkaXYgaWQ9ImNvbnRlbnQiIHN0eWxlPSJtaW4td2lkdGg6MTUwcHg7Ij4nKwogICAgICAgICAgICAgICc8cCBjbGFzcz0iZm9udC13ZWlnaHQtYm9sZCI+VGFnczwvcD4nKwogICAgICAgICAgICAgIHRhZ19jb250ZW50KwogICAgICAgICAgICAgICc8L2Rpdj4nCgogICAgICAgICAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgIGluZm93aW5kb3cuc2V0Q29udGVudChjb250ZW50KQogICAgICAgICAgICAgIGluZm93aW5kb3cub3BlbihtYXAsIG1hcmtlcikKICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIHBhdGgucHVzaChwb2ludCkKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBsZXQgdHJhY2tQYXRoID0gbmV3IGdvb2dsZS5tYXBzLlBvbHlsaW5lKHsKICAgICAgICAgIHBhdGg6IHBhdGgsCiAgICAgICAgICBnZW9kZXNpYzogdHJ1ZSwKICAgICAgICAgIHN0cm9rZUNvbG9yOiAnI2ZmOTkwMCcsCiAgICAgICAgICBzdHJva2VPcGFjaXR5OiAxLjAsCiAgICAgICAgICBzdHJva2VXZWlnaHQ6IDIsCiAgICAgICAgfSkKICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0cmFja1BhdGgsICdtb3VzZW92ZXInLCAoKSA9PiB7CiAgICAgICAgICB0cmFja1BhdGguc2V0T3B0aW9ucyh7c3Ryb2tlV2VpZ2h0OiA0fSkKICAgICAgICB9KQogICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRyYWNrUGF0aCwgJ21vdXNlb3V0JywgKCkgPT4gewogICAgICAgICAgdHJhY2tQYXRoLnNldE9wdGlvbnMoe3N0cm9rZVdlaWdodDogMn0pCiAgICAgICAgfSkKICAgICAgICB0cmFja1BhdGguc2V0TWFwKG1hcCkKICAgICAgICBpZiAobm9EYXRhID09IGZhbHNlKQogICAgICAgICAgdGhpcy5mbGFzaCgndHJhY2tpbmcgc3VjY2VzcycsICdzdWNjZXNzJyx7dGltZW91dDogMzAwMH0pCiAgICAgICAgICB0aGlzLmZsYXNoKCd0cmFja2luZyBzdWNjZXNzJywgJ3N1Y2Nlc3MnLHt0aW1lb3V0OiAzMDAwfSkKICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhpcy5mbGFzaChgJHtlcnJvcn1gLCAnZXJyb3InKSwKICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQogICAgICAgIHRoaXMuZXJyb3JlZCA9IHRydWUKICAgICAgfSkKICAgIH0sCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PSBUcmFjayByYW5kb20gbiB1c2VycyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIG1hcEJ1aWxkVHJhY2tOKCkgewogICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgIGxldCBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXBfY2FudmFzJyksIHsKICAgICAgICB6b29tOiAxMywKICAgICAgICBjZW50ZXI6ICB7bGF0OiAtMzcuNzk5OCwgbG5nOiAxNDQuOTQ2MH0sCiAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSwKICAgICAgICBzdHlsZXM6IG1hcFN0eWxlCiAgICAgIH0pCgogICAgICBsZXQgaW5mb3dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCkKICAgICAgbGV0IHBhdGhzID0gW10KICAgICAgbGV0IGNvbG9ycyA9IFtdCiAgICAgIGxldCBzRGF0ZSA9IG5ldyBEYXRlKHRoaXMuc3RhcnRfdGltZSkKICAgICAgbGV0IGVEYXRlID0gbmV3IERhdGUodGhpcy5lbmRfdGltZSkKICAgICAgbGV0IG5vRGF0YSA9IGZhbHNlCiAgICAgIAogICAgICBsZXQgc3RhcnRfdGltZSA9IHRoaXMudG9JU09Mb2NhbChzRGF0ZSkucmVwbGFjZSgvVC9nLCAiICIpLAogICAgICAgICAgZW5kX3RpbWUgPSB0aGlzLnRvSVNPTG9jYWwoZURhdGUpLnJlcGxhY2UoL1QvZywgIiAiKQoKICAgICAgaWYgKHN0YXJ0X3RpbWUuaW5jbHVkZXMoJ05hTicpIHx8IGVuZF90aW1lLmluY2x1ZGVzKCdOYU4nKSkKICAgICAgICBzdGFydF90aW1lID0gZW5kX3RpbWUgPSBudWxsCiAgICAgICAgCiAgICAgIGxldCBkYXRhID0gewogICAgICAgIC8vc3RhcnRfdGltZTogJzIwMTYtMDEtMDkgMTA6MDA6MDArMTAwMCcsCiAgICAgICAgLy9lbmRfdGltZTogJzIwMTYtMTAtMDkgMTA6MDA6MDArMTAwMCcsCiAgICAgICAgc3RhcnRfdGltZSwKICAgICAgICBlbmRfdGltZSwKICAgICAgICB0YWdzOiB0aGlzLnRhZ3MsCiAgICAgICAgc2tpcDogcGFyc2VJbnQodGhpcy5za2lwKSwKICAgICAgICB0aHJlc2hvbGQ6IDAuOSwKICAgICAgICBzaW5nbGU6IDIwICAKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coZGF0YSkKICAgICAgCiAgICAgIHRoaXMuJGFqYXgoewogICAgICAgIHVybDogYC9hcGkvc3RhdGlzdGljcy90cmFjay9yYW5kb20vJHt0aGlzLm51bWJlcn0vYCwKICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICBkYXRhOiBkYXRhCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzLmRhdGEpLmxlbmd0aCA9PT0gMCkKICAgICAgICAgIHRoaXMuZmxhc2goJ25vIGRhdGEgbWF0Y2ggY3VycmVudCBxdWVyeScsICdlcnJvcicpCiAgICAgICAgICBub0RhdGEgPSB0cnVlCiAgICAgICAgCiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCgogICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJlcy5kYXRhKSkgewogICAgICAgICAgbGV0IHBvaW50ID0gewogICAgICAgICAgICBsYXQ6IHZhbHVlWzBdLmdlb1sxXSwgCiAgICAgICAgICAgIGxuZzogdmFsdWVbMF0uZ2VvWzBdCiAgICAgICAgICB9CiAgICAgICAgICBsZXQgY29sb3IgPSB0aGlzLmdldFJhbmRvbUNvbG9yKCkKICAgICAgICAgIGxldCBwYXRoID0gW10KICAgICAgICAgIHBhdGgucHVzaChwb2ludCkKICAgICAgICAgIGNvbG9ycy5wdXNoKGNvbG9yKQogICAgICAgICAgbGV0IHN2Z19pY29uID0gQ29uc3Quc3ZnX25ldXRyYWwKCiAgICAgICAgICBpZiAodmFsdWVbMF0udGFncy5zZW50aW1lbnQpewogICAgICAgICAgICBpZiAodmFsdWVbMF0udGFncy5zZW50aW1lbnRbMF0gPT0gJ3Bvc2l0aXZlJyl7CiAgICAgICAgICAgICAgc3ZnX2ljb24gPSBDb25zdC5zdmdfcG9zaXRpdmUKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodmFsdWVbMF0udGFncy5zZW50aW1lbnRbMF0gPT0gJ25lZ2F0aXZlJyl7CiAgICAgICAgICAgICAgc3ZnX2ljb24gPSBDb25zdC5zdmdfbmVnYXRpdmUKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgICBsZXQgaWNvbiA9IHsKICAgICAgICAgICAgcGF0aDogc3ZnX2ljb24sCiAgICAgICAgICAgIGZpbGxDb2xvcjogY29sb3IsCiAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAxLAogICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgyNTAsMjUwKSwKICAgICAgICAgICAgc3Ryb2tlV2VpZ2h0OiAwLCAKICAgICAgICAgICAgc2NhbGU6IC4xCiAgICAgICAgICB9CgogICAgICAgICAgbGV0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoewogICAgICAgICAgICBwb3NpdGlvbjogcG9pbnQsCiAgICAgICAgICAgIG1hcDogbWFwLAogICAgICAgICAgICBpY29uOiBpY29uLAogICAgICAgICAgICB0aXRsZTogdmFsdWVbMF0udGltZQogICAgICAgICAgfSkKCiAgICAgICAgICBsZXQgdGFnX2NvbnRlbnQgPSAnJwoKICAgICAgICAgIGZvciAoY29uc3QgW21haW5UYWcsIHN1YlRhZ3NdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlWzBdLnRhZ3MpKXsKICAgICAgICAgICAgc3ViVGFncy5mb3JFYWNoKHRhZyA9PiB7CiAgICAgICAgICAgICAgdGFnX2NvbnRlbnQgPSB0YWdfY29udGVudCArIGA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLWRhcmsiPiR7dGFnfTwvYnV0dG9uPmAKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsdWVbMF0uaW1nX2lkLmxlbmd0aD4wKXsKICAgICAgICAgICAgdmFsdWVbMF0uaW1nX2lkLmZvckVhY2goaW1nID0+IHsKICAgICAgICAgICAgICB0YWdfY29udGVudCA9IHRhZ19jb250ZW50ICsgYDxhIGNsYXNzPSJidG4gYnRuLXdhcm5pbmciIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwOi8vMTcyLjI2LjM3LjIyNS9hcGkvdHdlZXQvcGljLyR7aW1nfSI+SU1BR0U8L2E+YAogICAgICAgICAgICB9KQogICAgICAgICAgfQoKICAgICAgICAgIGxldCBjb250ZW50ID0gJzxkaXYgaWQ9ImNvbnRlbnQiIHN0eWxlPSJtaW4td2lkdGg6MTUwcHg7Ij4nKwogICAgICAgICAgICAnPGg0IGNsYXNzPSJmb250LXdlaWdodC1ib2xkIj4nKyBrZXkgKyc8L2g0PicrCiAgICAgICAgICAgIHRhZ19jb250ZW50KwogICAgICAgICAgICAnPC9kaXY+JwoKICAgICAgICAgIG1hcmtlci5hZGRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICAgIGluZm93aW5kb3cuc2V0Q29udGVudChjb250ZW50KQogICAgICAgICAgICBpbmZvd2luZG93Lm9wZW4obWFwLCBtYXJrZXIpCiAgICAgICAgICB9KQoKICAgICAgICAgIHZhbHVlLnNsaWNlKDEpLmZvckVhY2goKHRyYWNrKSA9PiB7CiAgICAgICAgICAgIHN2Z19pY29uID0gQ29uc3Quc3ZnX25ldXRyYWwKICAgICAgICAgICAgaWYgKHRyYWNrLnRhZ3Muc2VudGltZW50KXsKICAgICAgICAgICAgICBpZiAodHJhY2sudGFncy5zZW50aW1lbnRbMF0gPT0gJ3Bvc2l0aXZlJyl7CiAgICAgICAgICAgICAgICBzdmdfaWNvbiA9IENvbnN0LnN2Z19wb3NpdGl2ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodHJhY2sudGFncy5zZW50aW1lbnRbMF0gPT0gJ25lZ2F0aXZlJyl7CiAgICAgICAgICAgICAgICBzdmdfaWNvbiA9IENvbnN0LnN2Z19uZWdhdGl2ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGljb25fc209IHsKICAgICAgICAgICAgICBwYXRoOiBzdmdfaWNvbiwKICAgICAgICAgICAgICBmaWxsQ29sb3I6IGNvbG9yLAogICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAxLAogICAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDI1MCwyNTApLAogICAgICAgICAgICAgIHN0cm9rZVdlaWdodDogMCwgCiAgICAgICAgICAgICAgc2NhbGU6IC4wNQogICAgICAgICAgICB9CgogICAgICAgICAgICBwb2ludCA9IHsKICAgICAgICAgICAgICBsYXQ6IHRyYWNrLmdlb1sxXSwgCiAgICAgICAgICAgICAgbG5nOiB0cmFjay5nZW9bMF0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoewogICAgICAgICAgICAgIHBvc2l0aW9uOiBwb2ludCwKICAgICAgICAgICAgICBtYXA6IG1hcCwKICAgICAgICAgICAgICBpY29uOiBpY29uX3NtLAogICAgICAgICAgICAgIHRpdGxlOiB0cmFjay50aW1lCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICBsZXQgdGFnX2NvbnRlbnQgPSAnJwoKICAgICAgICAgICAgZm9yIChjb25zdCBbbWFpblRhZywgc3ViVGFnc10gb2YgT2JqZWN0LmVudHJpZXModHJhY2sudGFncykpewogICAgICAgICAgICAgIHN1YlRhZ3MuZm9yRWFjaCh0YWcgPT4gewogICAgICAgICAgICAgICAgdGFnX2NvbnRlbnQgPSB0YWdfY29udGVudCArIGA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLWRhcmsiPiR7dGFnfTwvYnV0dG9uPmAKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodHJhY2suaW1nX2lkLmxlbmd0aD4wKXsKICAgICAgICAgICAgICB0cmFjay5pbWdfaWQuZm9yRWFjaChpbWcgPT4gewogICAgICAgICAgICAgICAgdGFnX2NvbnRlbnQgPSB0YWdfY29udGVudCArIGA8YSBjbGFzcz0iYnRuIGJ0bi13YXJuaW5nIiB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cDovLzE3Mi4yNi4zNy4yMjUvYXBpL3R3ZWV0L3BpYy8ke2ltZ30iPklNQUdFPC9hPmAKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgY29udGVudCA9ICc8ZGl2IGlkPSJjb250ZW50IiBzdHlsZT0ibWluLXdpZHRoOjE1MHB4OyI+JysKICAgICAgICAgICAgICAnPHAgY2xhc3M9ImZvbnQtd2VpZ2h0LWJvbGQiPlRhZ3M8L3A+JysKICAgICAgICAgICAgICB0YWdfY29udGVudCsKICAgICAgICAgICAgICAnPC9kaXY+JwoKICAgICAgICAgICAgbWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgICBpbmZvd2luZG93LnNldENvbnRlbnQoY29udGVudCkKICAgICAgICAgICAgICBpbmZvd2luZG93Lm9wZW4obWFwLCBtYXJrZXIpCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICBwYXRoLnB1c2gocG9pbnQpCiAgICAgICAgICB9KQogICAgICAgICAgcGF0aHMucHVzaChwYXRoKQogICAgICAgIH0KICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgcGF0aHMuZm9yRWFjaCgocGF0aCxqKSA9PiB7CiAgICAgICAgICBsZXQgdHJhY2tQYXRoID0gbmV3IGdvb2dsZS5tYXBzLlBvbHlsaW5lKHsKICAgICAgICAgICAgcGF0aDogcGF0aCwKICAgICAgICAgICAgZ2VvZGVzaWM6IHRydWUsCiAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBjb2xvcnNbal0sCiAgICAgICAgICAgIHN0cm9rZU9wYWNpdHk6IDEuMCwKICAgICAgICAgICAgc3Ryb2tlV2VpZ2h0OiAyLAogICAgICAgICAgfSkKICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRyYWNrUGF0aCwgJ21vdXNlb3ZlcicsICgpID0+IHsKICAgICAgICAgICAgdHJhY2tQYXRoLnNldE9wdGlvbnMoe3N0cm9rZVdlaWdodDogNH0pCiAgICAgICAgICB9KQogICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodHJhY2tQYXRoLCAnbW91c2VvdXQnLCAoKSA9PiB7CiAgICAgICAgICAgIHRyYWNrUGF0aC5zZXRPcHRpb25zKHtzdHJva2VXZWlnaHQ6IDJ9KQogICAgICAgICAgfSkKICAgICAgICAgIHRyYWNrUGF0aC5zZXRNYXAobWFwKQogICAgICAgIH0pCiAgICAgICAgaWYgKG5vRGF0YSA9PSBmYWxzZSkKICAgICAgICAgIHRoaXMuZmxhc2goYCR7cGF0aHMubGVuZ3RofSB1c2VycyBmb3VuZGAsICdzdWNjZXNzJyx7dGltZW91dDogMzAwMH0pCiAgICAgICAgICB0aGlzLmZsYXNoKGAke3BhdGhzLmxlbmd0aH0gdXNlcnMgZm91bmRgLCAnc3VjY2Vzcycse3RpbWVvdXQ6IDMwMDB9KQogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICB0aGlzLmZsYXNoKGAke2Vycm9yfWAsICdlcnJvcicpLAogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZQogICAgICB9KQogICAgfSwKCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09IFRpbWUgZm9ybWF0dGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIHRvSVNPTG9jYWwoZCkgewogICAgICBsZXQgeiA9IG4gPT4gKG48MTA/ICcwJzonJykrbjsKICAgICAgbGV0IG9mZiA9IGQuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgICAgbGV0IHNpZ24gPSBvZmYgPCAwPyAnKycgOiAnLSc7CiAgICAgIG9mZiA9IE1hdGguYWJzKG9mZik7CgogICAgICByZXR1cm4gZC5nZXRGdWxsWWVhcigpICsgJy0nICsgeihkLmdldE1vbnRoKCkrMSkgKyAnLScgKwogICAgICAgICAgICB6KGQuZ2V0RGF0ZSgpKSArICdUJyArIHooZC5nZXRIb3VycygpKSArICc6JyAgKyB6KGQuZ2V0TWludXRlcygpKSArIAogICAgICAgICAgICAnOicgKyB6KGQuZ2V0U2Vjb25kcygpKSArIHNpZ24gKyB6KG9mZi82MHwwKSArIHoob2ZmJTYwKTsgCiAgICB9LAoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0gQ29sb3IgZ2VuZXJhdG9ycyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgZ2V0UmFuZG9tQ29sb3IoKSB7CiAgICAgIGNvbnN0IGxldHRlcnMgPSAnMDEyMzQ1Njc4OUFCQ0RFRic7CiAgICAgIGxldCBjb2xvciA9ICcjJzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHsKICAgICAgICBjb2xvciArPSBsZXR0ZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KV07CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbG9yOwogICAgfSwKCiAgICByZ2JUb0hleChyLCBnLCBiKSB7CiAgICAgIHZhciBoZXggPSAoKHI8PDE2KSB8IChnPDw4KSB8IGIpLnRvU3RyaW5nKDE2KTsKICAgICAgcmV0dXJuICIjIiArIG5ldyBBcnJheShNYXRoLmFicyhoZXgubGVuZ3RoLTcpKS5qb2luKCIwIikgKyBoZXg7CiAgICB9LAoKICAgIGhleFRvUmdiKGhleCkgewogICAgICB2YXIgcmdiID0gW107CiAgICAgIGZvcih2YXIgaT0xOyBpPDc7IGkrPTIpewogICAgICAgIHJnYi5wdXNoKHBhcnNlSW50KCIweCIgKyBoZXguc2xpY2UoaSxpKzIpKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJnYjsKICAgIH0sCgogICAgZ3JhZGllbnQgKHN0YXJ0Q29sb3IsZW5kQ29sb3Isc3RlcCkgewogICAgICB2YXIgc0NvbG9yID0gdGhpcy5oZXhUb1JnYihzdGFydENvbG9yKSwKICAgICAgICAgIGVDb2xvciA9IHRoaXMuaGV4VG9SZ2IoZW5kQ29sb3IpOwoKICAgICAgdmFyIHJTdGVwID0gKGVDb2xvclswXSAtIHNDb2xvclswXSkgLyBzdGVwLAogICAgICAgICAgZ1N0ZXAgPSAoZUNvbG9yWzFdIC0gc0NvbG9yWzFdKSAvIHN0ZXAsCiAgICAgICAgICBiU3RlcCA9IChlQ29sb3JbMl0gLSBzQ29sb3JbMl0pIC8gc3RlcDsKCiAgICAgIHZhciBncmFkaWVudENvbG9yQXJyID0gW107CiAgICAgIGZvcih2YXIgaT0wO2k8c3RlcDtpKyspewogICAgICAgICAgZ3JhZGllbnRDb2xvckFyci5wdXNoKHRoaXMucmdiVG9IZXgocGFyc2VJbnQoclN0ZXAqaStzQ29sb3JbMF0pLHBhcnNlSW50KGdTdGVwKmkrc0NvbG9yWzFdKSxwYXJzZUludChiU3RlcCppK3NDb2xvclsyXSkpKTsKICAgICAgfQogICAgICByZXR1cm4gZ3JhZGllbnRDb2xvckFycjsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"gmap\">\n    <loading :active.sync=\"visible\" :can-cancel=\"true\"></loading>\n    <!-- Map -->\n    <div id=\"map_canvas\" style=\"height: 100vh; width: 100%\" ></div>\n    <!-- Div on top of the map -->\n    <div id=\"onmap\">\n      <div class=\"container mt-3\">\n         <h2>General Search</h2>\n        <div>     \n          <b-dropdown id=\"dropdown-1\" text=\"Aurin\" class=\"m-md-2\">\n            <b-dropdown-item @click=\"mapAurin(['econ','unemployment_num'])\">Unemployment</b-dropdown-item>\n            <b-dropdown-item @click=\"mapAurin(['econ','total_people_hospital'])\">Total Hospital Admission</b-dropdown-item>\n            <b-dropdown-item @click=\"mapAurin(['econ','total_male_hospital'])\">Male Hospital Admission</b-dropdown-item>\n            <b-dropdown-item @click=\"mapAurin(['econ','total_female_hospital'])\">Female Hospital Admission</b-dropdown-item>\n            <b-dropdown-divider></b-dropdown-divider>\n            <b-dropdown-item @click=\"mapAurin(['offence','weapons related'])\">Weapon Releted</b-dropdown-item>\n            <b-dropdown-item @click=\"mapAurin(['offence','assaults'])\">Assaults</b-dropdown-item>\n            <b-dropdown-item @click=\"mapAurin(['offence','sexual offences'])\">Sexual Offences</b-dropdown-item>\n            <b-dropdown-item @click=\"mapAurin(['offence','robbery'])\">Robbery</b-dropdown-item>\n            <b-dropdown-item @click=\"mapAurin(['offence','harassment and threatening'])\">Harassment and Threatening</b-dropdown-item>\n            <b-dropdown-item @click=\"mapAurin(['offence','total'])\">Total Offence</b-dropdown-item>\n          </b-dropdown>\n          <div class=\"divider\"/>\n          <button class=\"btn btn-dark\" \n            @click=\"mapBuildZone('/api/statistics/zone/','melb')\">Melbourne\n          </button>\n          <div class=\"divider\"/>\n          <button class=\"btn btn-dark\" \n            @click=\"mapBuildZone('/api/statistics/vic/zone/','vic')\">VIC\n          </button>\n\n        </div>\n      </div>\n      <p></p>\n      <div></div>\n    </div>  \n    <div id=\"onmap2\">    \n      <div class=\"container mt-3\">\n        <p></p>\n        <h2>User Track</h2>\n        <p>Track user by user ID:</p>\n        <input class=\"form-control\" v-model=\"user_id\" type=\"text\" placeholder=\"Search..\">\n        <div id=\"myDIV\" class=\"mt-3\">\n          <button class=\"btn btn-dark\" :disabled=\"tags == null || tags == '' || user_id == ''\" @click=\"mapBuildTrack()\">Track</button>\n        </div>\n      </div> \n        <div class=\"container mt-3\">\n        <p>Track random number of users:</p>\n        <input class=\"form-control\" v-model=\"number\" type=\"number\" placeholder=\"Search..\">\n        <br>\n        <p>Skip:</p>\n        <input class=\"form-control\" v-model=\"skip\" type=\"number\" placeholder=\"Skip..\">\n        <div id=\"myDIV2\" class=\"mt-3\">\n          <button class=\"btn btn-dark\" :disabled=\"tags == null || tags == ''\" @click=\"mapBuildTrackN()\">Track</button>\n        </div>\n        <p></p>\n        <div></div>\n      </div>     \n    </div>\n    \n    <!-- Charts -->\n    <a class=\"anchor\" id=\"anchor1\"></a>\n    <div id=\"chart\" class=\"container-fluid w-100 d-inline-block\" style=\"height: 100vh;z-index:0;\">\n      <div class=\"row\">\n        <div class=\"col-lg-12\"><Barchart :chartData=\"this.barDatacollection\" :height=\"700\" :width=\"2000\" /></div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-3\"><Piechart :pieData=\"this.machineDatacollection_lust\"/></div>\n        <div class=\"col-lg-3\"><Piechart :pieData=\"this.machineDatacollection_gluttony\"/></div>\n        <div class=\"col-lg-3\"><Piechart :pieData=\"this.textDatacollection\"/></div>\n        <div class=\"col-lg-3\"><Piechart :pieData=\"this.sentimentDatacollection\"/></div>\n      </div> \n    </div>  \n\n    <!-- Tool Navbar -->\n    <nav class=\"navbar fixed-bottom navbar-light\">\n      <div class=\"row\" style=\"width: 100vw;\">\n        <div style=\"margin-left: 30px;\">\n          <span class=\"pull-left\">\n          <datetime v-model=\"start_time\" :type=\"'date'\" :title=\"'Select your start time'\"></datetime>\n          </span>\n        </div>\n        <div style=\"margin-left: 30px;\">\n          <a class=\"navbar-brand font-weight-bold text-white\">To</a>\n        </div>\n        <div style=\"margin-left: 15px;\">\n          <datetime v-model=\"end_time\" :type=\"'date'\" :title=\"'Select your end time'\"></datetime>\n        </div>\n        <div class=\"col-md-3\">\n          <sui-dropdown\n            fluid\n            multiple\n            :options=\"selections\"\n            placeholder=\"Sins\"\n            selection\n            v-model=\"tags\"\n          />\n        </div>\n\n        <div class=\"col-md-4\" style=\"height: 4vh; margin-bottom: 1vh;\">\n          <flash-message transitionIn=\"animated swing\"></flash-message>\n        </div>\n      </div>\n    </nav>\n\n  </div>\n</template>\n\n\n<script>\nimport Barchart from './../components/Barchart'\nimport Linechart from './../components/Linechart'\nimport Piechart from './../components/Piechart'\nimport Radarchart from './../components/Radarchart'\nimport {mapStyle} from './../assets/js/map-style'\nimport {Const} from './../assets/js/const'\nimport InfoWindowComponent from './InfoWindow'\nimport Vue from 'vue'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport {Datetime} from 'vue-datetime'\nimport 'vue-datetime/dist/vue-datetime.css'\nimport Loading from 'vue-loading-overlay'\nimport 'vue-loading-overlay/dist/vue-loading.css'\n\nexport default {\n  name: 'gmap',\n  components: {\n    Radarchart,\n    Piechart,\n    Linechart,\n    Barchart,\n    datetime: Datetime,\n    Loading\n  },\n\n  data() {\n    return {\n      visible: false,\n      pieData: [4,5,6,7],\n      barData: [],\n      barDataLabel: [],\n      radarData: [],\n      lineData: [],\n\n      machineDatacollection_lust: null,\n      machineDatacollection_gluttony: null,\n      textDatacollection:null,\n      sentimentDatacollection: null,\n      barDatacollection: null,\n\n      start_time: new Date().toString(),\n      end_time: new Date().toString(),\n      user_id: '',\n      number: 1,\n      skip: 0,\n      vic_geo: 'https://data.gov.au/geoserver/vic-local-government-areas-psma-administrative-boundaries/wfs?request=GetFeature&typeName=ckan_bdf92691_c6fe_42b9_a0e2_a4cd716fa811&outputFormat=json',\n      melb_geo: 'https://data.gov.au/geoserver/vic-local-government-areas-psma-administrative-boundaries/wfs?request=GetFeature&typeName=ckan_bdf92691_c6fe_42b9_a0e2_a4cd716fa811&outputFormat=json',\n      tags: null,\n      selections: [\n        { key: 'lust', text: 'Lust', value: 'lust' },\n        { key: 'gluttony', text: 'Gluttony', value: 'gluttony' },\n        { key: 'text', text: 'Text', value: 'text' },\n        { key: 'sentiment', text: 'Sentiment', value: 'sentiment' }\n      ]\n    }\n  },\n\n  mounted () {\n    this.mapInit()\n    this.chartBuildMachine()\n    this.chartBuildText()\n  },\n  \n  methods: {\n    // ========================== Init Map ==================================================\n    mapInit(){\n      let map = new google.maps.Map(document.getElementById('map_canvas'), {\n        zoom: 13,\n        center:  {lat: -37.7998, lng: 144.9460},\n        disableDefaultUI: true,\n        styles: mapStyle\n      })\n      \n      let infowindow = new google.maps.InfoWindow()\n\n      // ========================Icon examples=========================\n      let icon = {\n        path: Const.svg_lust,\n        fillColor: '#ff9900',\n        fillOpacity: 1,\n        anchor: new google.maps.Point(250,250),\n        strokeWeight: 0, \n        scale: .1\n      }\n            \n      let icon2 = {\n        path: Const.svg_gluttony,\n        fillColor: '#ff9900',\n        fillOpacity: 1,\n        anchor: new google.maps.Point(250,250),\n        strokeWeight: 0, \n        scale: .1\n      }\n\n      let icon3 = {\n        path: Const.svg_neutral,\n        fillColor: '#ff9900',\n        fillOpacity: 1,\n        anchor: new google.maps.Point(250,250),\n        strokeWeight: 0, \n        scale: .1\n      }\n            \n      let icon4 = {\n        path: Const.svg_positive,\n        fillColor: '#ff9900',\n        fillOpacity: 1,\n        anchor: new google.maps.Point(250,250),\n        strokeWeight: 0, \n        scale: .1\n      }\n\n      let icon5 = {\n        path: Const.svg_negative,\n        fillColor: '#ff9900',\n        fillOpacity: 1,\n        anchor: new google.maps.Point(250,250),\n        strokeWeight: 0, \n        scale: .1\n      }\n\n      let myFoodMark = {lat: -37.8036, lng: 144.9631}\n      let myLustMark = {lat: -37.8136, lng: 144.9631}\n      let myNormalMark = {lat: -37.8036, lng: 144.9531}\n      let myPositiveMark = {lat: -37.8136, lng: 144.9731}\n      let myNegativeMark = {lat: -37.8236, lng: 144.9631}\n\n      let foodMark = new google.maps.Marker({\n        position: myFoodMark,\n        map: map,\n        animation: google.maps.Animation.BOUNCE,\n        title: 'Hello Food!',\n        icon: icon2\n      })\n\n      let lustMark = new google.maps.Marker({\n        position: myLustMark,\n        map: map,\n        animation: google.maps.Animation.BOUNCE,\n        title: 'Hello Lust!',\n        icon: icon\n      })\n\n      let warthMark = new google.maps.Marker({\n        position: myNormalMark,\n        map: map,\n        animation: google.maps.Animation.BOUNCE,\n        title: 'Hello Normal!',\n        icon: icon3\n      })\n\n      let positiveMark = new google.maps.Marker({\n        position: myPositiveMark,\n        map: map,\n        animation: google.maps.Animation.BOUNCE,\n        title: 'Hello Positive!',\n        icon: icon4\n      })\n\n      let negativeMark = new google.maps.Marker({\n        position: myNegativeMark,\n        map: map,\n        animation: google.maps.Animation.BOUNCE,\n        title: 'Hello Negative!',\n        icon: icon5\n      })\n\n      positiveMark.addListener('click', function() {\n        let content = '<div id=\"content\" style=\"min-width:150px;\">'+\n                      '<p>Tags</p>'+\n                      '<button class=\"btn btn-primary btn-dark\">positive</button>'+\n                      '<button class=\"btn btn-primary btn-warning\">positive</button>'+\n                      '<button class=\"btn btn-primary\">positive</button>'+\n                      '</div>';\n        \n        infowindow.setContent(content)\n        infowindow.open(map, positiveMark)\n      })\n    },\n\n    // ========================== Show aurin data on map ====================================\n    mapAurin(type){\n      this.visible=true\n      let map = new google.maps.Map(document.getElementById('map_canvas'), {\n        zoom: 12,\n        center:  {lat: -37.7998, lng: 144.9460},\n        disableDefaultUI: true,\n        styles: mapStyle\n      })\n      google.maps.event.addListenerOnce(map, 'idle', () => {\n        this.visible=false\n      })\n      let colors = this.gradient('#ffffff','#ff9900',7)\n\n      map.data.loadGeoJson(this.vic_geo)\n      map.data.setStyle((feature) => {\n        let name = feature.getProperty('vic_lga__3')\n        let total = 0\n\n        if (Const.aurin[`${name}`]){\n          if (Const.aurin[`${name}`][`${type[0]}`][`${type[1]}`]){\n            total = Const.aurin[`${name}`][`${type[0]}`][`${type[1]}`]\n          }\n        }\n\n        let color = '#000000'\n        if (total > 1)\n          color = colors[0]\n        if (total > 1000)\n          color = colors[1]\n        if (total > 3000)\n          color = colors[2]\n        if (total > 5000)\n          color = colors[3]\n        if (total > 10000)\n          color = colors[4]\n        if (total > 15000)\n          color = colors[5]\n        if (total > 20000)\n          color = colors[6]  \n\n        return {\n          fillColor: color,\n          fillOpacity: 0.7,\n          strokeWeight: 1\n        }\n      })\n \n    },\n\n    // ========================== Build Map =================================================\n    mapBuild(scope){\n      let map = new google.maps.Map(document.getElementById('map_canvas'), {\n        zoom: 12,\n        center:  {lat: -37.7998, lng: 144.9460},\n        disableDefaultUI: true,\n        styles: mapStyle\n      })\n\n      let infowindow = new google.maps.InfoWindow()\n      let marker, i\n      let markers = []\n      let locations = []\n      let colors = this.gradient('#ffffff','#ff9900',7)\n     \n\n      this.barDataLabel.length=0\n      this.barData.length=0\n\n      // ======================== Setup each region/ Collect bar data ==========================\n      // set style for each region\n      map.data.loadGeoJson(this.melb_geo)\n      if (scope == 'melb') {\n        map.data.setStyle((feature) => {\n          let total = feature.getProperty('total')\n          let name = feature.getProperty('name')\n\n          if (!this.barDataLabel.includes(name)){\n            this.barDataLabel.push(name)\n            this.barData.push(total)\n          }\n          let color = '#000000'\n          if (total > 1)\n            color = colors[0]\n          if (total > 100)\n            color = colors[1]\n          if (total > 300)\n            color = colors[2]\n          if (total > 500)\n            color = colors[3]\n          if (total > 1000)\n            color = colors[4]\n          if (total > 1500)\n            color = colors[5]\n          if (total > 2000)\n            color = colors[6]  \n\n          return {\n            fillColor: color,\n            fillOpacity: 0.7,\n            strokeWeight: 1\n          }\n        })\n      } else {\n         map.data.setStyle((feature) => {\n          let total = feature.getProperty('total')\n          let name = feature.getProperty('name')\n\n          if (!this.barDataLabel.includes(name)){\n            this.barDataLabel.push(name)\n            this.barData.push(total)\n          }\n          let color = '#000000'\n          if (total > 1)\n            color = colors[0]\n          if (total > 1000)\n            color = colors[1]\n          if (total > 3000)\n            color = colors[2]\n          if (total > 5000)\n            color = colors[3]\n          if (total > 10000)\n            color = colors[4]\n          if (total > 15000)\n            color = colors[5]\n          if (total > 20000)\n            color = colors[6]  \n\n          return {\n            fillColor: color,\n            fillOpacity: 0.7,\n            strokeWeight: 1\n          }\n        })\n      }\n      // setup bar data\n      this.barDatacollection = {\n        labels: this.barDataLabel,\n        datasets: [\n          {\n            label: 'Total Sins',\n            backgroundColor: '#ff9900',\n            data: this.barData\n          }\n        ]\n      }\n\n      // mouse click event: show grid info\n      map.data.addListener('click', (event) => {\n        // prepare data\n        let name = event.feature.getProperty(\"name\")\n        let statistics = event.feature.getProperty(\"statistcs\")\n \n        let infoPieDataSentiment = [] \n        let infoPieNameSentiment = []\n        let infoPieData = []\n        let infoPieName = []\n        let temp = 'sentiment'\n\n        for (const [key, value] of Object.entries(statistics.sentiment)) {\n          infoPieNameSentiment.push(key)\n          infoPieDataSentiment.push(value)\n        }\n\n        for (const [key, value] of Object.entries(statistics)) {\n          if (key != temp){\n            for(const [inner_key, inner_value] of Object.entries(value)) {\n              infoPieName.push(inner_key)\n              infoPieData.push(inner_value)\n            }\n          }\n        }\n\n        // set all chart data here\n        let pieDatacollection_sentiment = {\n          labels: infoPieNameSentiment,\n          datasets: [\n            {\n              label: 'Sentiment',\n              backgroundColor: this.gradient('#F5F5F5','ff9900',infoPieDataSentiment.length) ,\n              data: infoPieDataSentiment\n            }\n          ]\n        }\n\n        let pieDatacollection = {\n          labels: infoPieName,\n          datasets: [\n            {\n              label: 'Sin',\n              backgroundColor: this.gradient('#F5F5F5','ff9900',infoPieData.length) ,\n              data: infoPieData\n            }\n          ]\n        }\n        \n        // init infowindow with customized view\n        let InfoWindow = Vue.extend(InfoWindowComponent)\n        \n        // send data to the view\n        let instance = new InfoWindow({\n          propsData: {\n            name,\n            pieDatacollection_sentiment,\n            pieDatacollection\n          }\n        })\n        \n        instance.$mount()\n\n        infowindow.setContent(instance.$el)\n        //infowindow.setPosition(event.feature.getGeometry().getAt(0).getAt(0).getAt(0))\n        infowindow.setPosition(event.latLng)\n        //infowindow.setOptions({pixelOffset: new google.maps.Size(0,0)})\n        infowindow.open(map)\n      })\n      \n      // mouse over event: highlight color\n      map.data.addListener('mouseover', (event) => {\n        map.data.overrideStyle(event.feature, {fillColor: 'black'})\n      })\n\n      // mouse our event: reset color/info-window\n      map.data.addListener('mouseout', (event) => {\n        map.data.revertStyle()\n        infowindow.close()\n      })\n    },\n\n    // ====================== Get Map Data ==================================================\n    mapBuildZone(zone, scope) {\n      this.visible = true\n      this.$ajax({\n        url: zone,\n        method: 'GET',\n      }).then(res => {\n          this.melb_geo = res.data.url,\n          this.visible = false,\n          console.log(this.melb_geo),\n          // re-render the map here\n          this.flash('success', 'success',{timeout: 3000}),\n          this.mapBuild(scope)\n        })\n        .catch(error => {\n          this.visible = false,\n          this.flash(`${error}`, 'error'),\n          this.errored = true\n      })    \n    },\n\n    // ====================== Get Machine Learning Data =====================================\n    chartBuildMachine() {\n      this.visilbe = true\n      this.$ajax({\n        url: '/api/statistics/machine/',\n        method: 'GET',\n      }).then(res => {\n        this.machineDatacollection_lust = {\n          labels: res.data.lust.key,\n          datasets: [\n            {\n              label: 'Lust',\n              backgroundColor: this.gradient('#ff9900','#ffffff', res.data.lust.key.length),\n              data: res.data.lust.value\n            }\n          ]\n        }\n        this.machineDatacollection_gluttony = {\n          labels: res.data.gluttony.key,\n          datasets: [\n            {\n              label: 'Gluttony',\n              backgroundColor: this.gradient('#ff9900','#ffffff', res.data.gluttony.key.length),\n              data: res.data.gluttony.value\n            }\n          ]\n        }\n        this.visible = false\n      })\n      .catch(error => {\n        this.visible = false,\n        this.flash(`${error}`, 'error'),\n        this.errored = true\n      }) \n    },\n\n    // ====================== Get NLP Learning Data =========================================\n    chartBuildText() {\n      this.visilbe = true\n      this.$ajax({\n        url: '/api/statistics/text/',\n        method: 'GET',\n      }).then(res => {\n        console.log(res)\n        this.textDatacollection = {\n          labels: res.data.text.key,\n          datasets: [\n            {\n              label: 'Text',\n              backgroundColor: this.gradient('#ff9900','#ffffff', res.data.text.key.length),\n              data: res.data.text.value\n            }\n          ]\n        }\n        this.sentimentDatacollection = {\n          labels: res.data.sentiment.key,\n          datasets: [\n            {\n              label: 'Sentiment',\n              backgroundColor: this.gradient('#F5F5F5','ff9900', res.data.sentiment.key.length),\n              data: res.data.sentiment.value\n            }\n          ]\n        }\n        this.visible = false\n      })\n      .catch(error => {\n        this.visible = false,\n        this.flash(`${error}`, 'error'),\n        this.errored = true\n      }) \n    },\n\n    // ====================== Track 1 User by ID ============================================\n    mapBuildTrack(){\n      this.visible = true\n      let map = new google.maps.Map(document.getElementById('map_canvas'), {\n        zoom: 13,\n        center:  {lat: -37.7998, lng: 144.9460},\n        disableDefaultUI: true,\n        styles: mapStyle\n      })\n\n      let infowindow = new google.maps.InfoWindow()\n      let path = []\n      let sDate = new Date(this.start_time)\n      let eDate = new Date(this.end_time)\n      let start_time = this.toISOLocal(sDate).replace(/T/g, \" \"),\n          end_time = this.toISOLocal(eDate).replace(/T/g, \" \")\n      let noData = false\n\n      if (start_time.includes('NaN') || end_time.includes('NaN'))\n        start_time = end_time = null\n        \n      let data = {\n        //start_time: '2016-01-09 10:00:00+1000',\n        //end_time: '2016-10-09 10:00:00+1000',\n        start_time,\n        end_time,\n        tags: this.tags,\n        threshold: 0.9\n      }\n        \n      console.log(data)\n\n      this.$ajax({\n        url: `/api/statistics/track/${this.user_id}/`,\n        method: 'POST',\n        data: data\n      }).then(res => {\n\n        console.log(res.data)\n        \n        if (Object.keys(res.data).length === 0)\n          this.flash('no data match current query', 'error')\n          noData = true\n\n        for (const [key, value] of Object.entries(res.data)) {\n          let point = {\n            lat: value[0].geo[1], \n            lng: value[0].geo[0]\n          }\n          \n          path.push(point)\n          let svg_icon = Const.svg_neutral\n\n          if (value[0].tags.sentiment){\n            if (value[0].tags.sentiment[0] == 'positive'){\n              svg_icon = Const.svg_positive\n            }\n            if (value[0].tags.sentiment[0] == 'negative'){\n              svg_icon = Const.svg_negative\n            }\n          }\n\n          let icon = {\n            path: svg_icon,\n            fillColor: '#ff9900',\n            fillOpacity: 1,\n            anchor: new google.maps.Point(250,250),\n            strokeWeight: 0, \n            scale: .1\n          }\n\n          let marker = new google.maps.Marker({\n            position: point,\n            map: map,\n            icon: icon,\n            title: value[0].time + value[0].text\n          })\n\n          let tag_content = ''\n        \n          for (const [mainTag, subTags] of Object.entries(value[0].tags)){\n            subTags.forEach(tag => {\n              tag_content = tag_content + `<button class=\"btn btn-primary btn-dark\">${tag}</button>`\n            })\n          }\n\n          if (value[0].img_id.length>0){\n            value[0].img_id.forEach(img => {\n              tag_content = tag_content + `<a class=\"btn btn-warning\" target=\"_blank\" href=\"http://172.26.37.225/api/tweet/pic/${img}\">IMAGE</a>`\n            })\n          }\n\n          let content = '<div id=\"content\" style=\"min-width:150px;\">'+\n            '<h4 class=\"font-weight-bold\">'+ key +'</h4>'+\n            tag_content+\n            '</div>'\n\n          marker.addListener('click', () => {     \n            infowindow.setContent(content)\n            infowindow.open(map, marker)\n          })\n\n          value.slice(1).forEach((track) => {\n            svg_icon = Const.svg_neutral\n            if (track.tags.sentiment){\n              if (track.tags.sentiment[0] == 'positive'){\n                svg_icon = Const.svg_positive\n              }\n              if (track.tags.sentiment[0] == 'negative'){\n                svg_icon = Const.svg_negative\n              }\n            }\n\n            let icon_sm= {\n              path: svg_icon,\n              fillColor: '#ff9900',\n              fillOpacity: 1,\n              anchor: new google.maps.Point(250,250),\n              strokeWeight: 0, \n              scale: .05\n            }\n\n            point = {\n              lat: track.geo[1], \n              lng: track.geo[0]\n            }\n\n            let marker = new google.maps.Marker({\n              position: point,\n              map: map,\n              icon: icon_sm,\n              title: track.time + track.text\n            })\n\n            tag_content = ''\n\n            for (const [mainTag, subTags] of Object.entries(track.tags)){\n              subTags.forEach(tag => {\n                tag_content = tag_content + `<button class=\"btn btn-primary btn-dark\">${tag}</button>`\n              })\n            }\n\n            if (track.img_id.length>0){\n              track.img_id.forEach(img => {\n                tag_content = tag_content + `<a class=\"btn btn-warning\" target=\"_blank\" href=\"http://172.26.37.225/api/tweet/pic/${img}\">IMAGE</a>`\n              })\n            }\n\n            let content = '<div id=\"content\" style=\"min-width:150px;\">'+\n              '<p class=\"font-weight-bold\">Tags</p>'+\n              tag_content+\n              '</div>'\n\n            marker.addListener('click', () => {\n              infowindow.setContent(content)\n              infowindow.open(map, marker)\n            })\n\n            path.push(point)\n          })\n        }\n      }).then(() => {\n        let trackPath = new google.maps.Polyline({\n          path: path,\n          geodesic: true,\n          strokeColor: '#ff9900',\n          strokeOpacity: 1.0,\n          strokeWeight: 2,\n        })\n        google.maps.event.addListener(trackPath, 'mouseover', () => {\n          trackPath.setOptions({strokeWeight: 4})\n        })\n        google.maps.event.addListener(trackPath, 'mouseout', () => {\n          trackPath.setOptions({strokeWeight: 2})\n        })\n        trackPath.setMap(map)\n        if (noData == false)\n          this.flash('tracking success', 'success',{timeout: 3000})\n          this.flash('tracking success', 'success',{timeout: 3000})\n        this.visible = false\n      }).catch(error => {\n        this.flash(`${error}`, 'error'),\n        this.visible = false\n        this.errored = true\n      })\n    },\n\n    // ====================== Track random n users ==========================================\n    mapBuildTrackN() {\n      this.visible = true\n      let map = new google.maps.Map(document.getElementById('map_canvas'), {\n        zoom: 13,\n        center:  {lat: -37.7998, lng: 144.9460},\n        disableDefaultUI: true,\n        styles: mapStyle\n      })\n\n      let infowindow = new google.maps.InfoWindow()\n      let paths = []\n      let colors = []\n      let sDate = new Date(this.start_time)\n      let eDate = new Date(this.end_time)\n      let noData = false\n      \n      let start_time = this.toISOLocal(sDate).replace(/T/g, \" \"),\n          end_time = this.toISOLocal(eDate).replace(/T/g, \" \")\n\n      if (start_time.includes('NaN') || end_time.includes('NaN'))\n        start_time = end_time = null\n        \n      let data = {\n        //start_time: '2016-01-09 10:00:00+1000',\n        //end_time: '2016-10-09 10:00:00+1000',\n        start_time,\n        end_time,\n        tags: this.tags,\n        skip: parseInt(this.skip),\n        threshold: 0.9,\n        single: 20  \n      }\n\n      console.log(data)\n      \n      this.$ajax({\n        url: `/api/statistics/track/random/${this.number}/`,\n        method: 'POST',\n        data: data\n      }).then(res => {\n        if (Object.keys(res.data).length === 0)\n          this.flash('no data match current query', 'error')\n          noData = true\n        \n        console.log(res.data)\n\n        for (const [key, value] of Object.entries(res.data)) {\n          let point = {\n            lat: value[0].geo[1], \n            lng: value[0].geo[0]\n          }\n          let color = this.getRandomColor()\n          let path = []\n          path.push(point)\n          colors.push(color)\n          let svg_icon = Const.svg_neutral\n\n          if (value[0].tags.sentiment){\n            if (value[0].tags.sentiment[0] == 'positive'){\n              svg_icon = Const.svg_positive\n            }\n            if (value[0].tags.sentiment[0] == 'negative'){\n              svg_icon = Const.svg_negative\n            }\n          }\n          \n          let icon = {\n            path: svg_icon,\n            fillColor: color,\n            fillOpacity: 1,\n            anchor: new google.maps.Point(250,250),\n            strokeWeight: 0, \n            scale: .1\n          }\n\n          let marker = new google.maps.Marker({\n            position: point,\n            map: map,\n            icon: icon,\n            title: value[0].time\n          })\n\n          let tag_content = ''\n\n          for (const [mainTag, subTags] of Object.entries(value[0].tags)){\n            subTags.forEach(tag => {\n              tag_content = tag_content + `<button class=\"btn btn-primary btn-dark\">${tag}</button>`\n            })\n          }\n\n          if (value[0].img_id.length>0){\n            value[0].img_id.forEach(img => {\n              tag_content = tag_content + `<a class=\"btn btn-warning\" target=\"_blank\" href=\"http://172.26.37.225/api/tweet/pic/${img}\">IMAGE</a>`\n            })\n          }\n\n          let content = '<div id=\"content\" style=\"min-width:150px;\">'+\n            '<h4 class=\"font-weight-bold\">'+ key +'</h4>'+\n            tag_content+\n            '</div>'\n\n          marker.addListener('click', () => {\n            infowindow.setContent(content)\n            infowindow.open(map, marker)\n          })\n\n          value.slice(1).forEach((track) => {\n            svg_icon = Const.svg_neutral\n            if (track.tags.sentiment){\n              if (track.tags.sentiment[0] == 'positive'){\n                svg_icon = Const.svg_positive\n              }\n              if (track.tags.sentiment[0] == 'negative'){\n                svg_icon = Const.svg_negative\n              }\n            }\n\n            let icon_sm= {\n              path: svg_icon,\n              fillColor: color,\n              fillOpacity: 1,\n              anchor: new google.maps.Point(250,250),\n              strokeWeight: 0, \n              scale: .05\n            }\n\n            point = {\n              lat: track.geo[1], \n              lng: track.geo[0]\n            }\n\n            let marker = new google.maps.Marker({\n              position: point,\n              map: map,\n              icon: icon_sm,\n              title: track.time\n            })\n\n            let tag_content = ''\n\n            for (const [mainTag, subTags] of Object.entries(track.tags)){\n              subTags.forEach(tag => {\n                tag_content = tag_content + `<button class=\"btn btn-primary btn-dark\">${tag}</button>`\n              })\n            }\n\n            if (track.img_id.length>0){\n              track.img_id.forEach(img => {\n                tag_content = tag_content + `<a class=\"btn btn-warning\" target=\"_blank\" href=\"http://172.26.37.225/api/tweet/pic/${img}\">IMAGE</a>`\n              })\n            }\n\n            let content = '<div id=\"content\" style=\"min-width:150px;\">'+\n              '<p class=\"font-weight-bold\">Tags</p>'+\n              tag_content+\n              '</div>'\n\n            marker.addListener('click', () => {\n              infowindow.setContent(content)\n              infowindow.open(map, marker)\n            })\n\n            path.push(point)\n          })\n          paths.push(path)\n        }\n      }).then(() => {\n        paths.forEach((path,j) => {\n          let trackPath = new google.maps.Polyline({\n            path: path,\n            geodesic: true,\n            strokeColor: colors[j],\n            strokeOpacity: 1.0,\n            strokeWeight: 2,\n          })\n          google.maps.event.addListener(trackPath, 'mouseover', () => {\n            trackPath.setOptions({strokeWeight: 4})\n          })\n          google.maps.event.addListener(trackPath, 'mouseout', () => {\n            trackPath.setOptions({strokeWeight: 2})\n          })\n          trackPath.setMap(map)\n        })\n        if (noData == false)\n          this.flash(`${paths.length} users found`, 'success',{timeout: 3000})\n          this.flash(`${paths.length} users found`, 'success',{timeout: 3000})\n        this.visible = false\n      }).catch(error => {\n        console.log(error)\n        this.flash(`${error}`, 'error'),\n        this.visible = false\n        this.errored = true\n      })\n    },\n\n    // ====================== Time formatter =================================================\n    toISOLocal(d) {\n      let z = n => (n<10? '0':'')+n;\n      let off = d.getTimezoneOffset();\n      let sign = off < 0? '+' : '-';\n      off = Math.abs(off);\n\n      return d.getFullYear() + '-' + z(d.getMonth()+1) + '-' +\n            z(d.getDate()) + 'T' + z(d.getHours()) + ':'  + z(d.getMinutes()) + \n            ':' + z(d.getSeconds()) + sign + z(off/60|0) + z(off%60); \n    },\n\n    // ====================== Color generators ===============================================\n    getRandomColor() {\n      const letters = '0123456789ABCDEF';\n      let color = '#';\n      for (let i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n      }\n      return color;\n    },\n\n    rgbToHex(r, g, b) {\n      var hex = ((r<<16) | (g<<8) | b).toString(16);\n      return \"#\" + new Array(Math.abs(hex.length-7)).join(\"0\") + hex;\n    },\n\n    hexToRgb(hex) {\n      var rgb = [];\n      for(var i=1; i<7; i+=2){\n        rgb.push(parseInt(\"0x\" + hex.slice(i,i+2)));\n      }\n      return rgb;\n    },\n\n    gradient (startColor,endColor,step) {\n      var sColor = this.hexToRgb(startColor),\n          eColor = this.hexToRgb(endColor);\n\n      var rStep = (eColor[0] - sColor[0]) / step,\n          gStep = (eColor[1] - sColor[1]) / step,\n          bStep = (eColor[2] - sColor[2]) / step;\n\n      var gradientColorArr = [];\n      for(var i=0;i<step;i++){\n          gradientColorArr.push(this.rgbToHex(parseInt(rStep*i+sColor[0]),parseInt(gStep*i+sColor[1]),parseInt(bStep*i+sColor[2])));\n      }\n      return gradientColorArr;\n    }\n  }\n}\n</script>\n\n\n<style>\n@import '~bootstrap/dist/css/bootstrap.css';\n@import '~bootstrap-vue/dist/bootstrap-vue.css';\n#header #logo {\n  background: url(\"../assets/images/logo_premium.png\") center;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-color: transparent;\n  position: fixed;\n  width: 12em;\n  height: 6em;\n  top: 0;\n  left: 3em;\n}\n#gmap {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 0px;\n  background-color:#bbb;\n  position: relative;\n}\n#onmap {\n  background-color:#ff9900;\n  position: absolute; \n  top: 100px; \n  right: 20px; \n  z-index: 9999; \n  border-radius: 25px;\n  width: 320px;\n}\n#onmap2 {\n  background-color:#ff9900;\n  position: absolute; \n  top: 250px; \n  right: 20px; \n  z-index: 9998; \n  border-radius: 25px;\n  width: 320px;\n}\na.anchor {\n  display: block;\n  position: relative;\n  top: -6em;\n  visibility: hidden;\n}\n.line{\n  height: 1em;\n  border-bottom: 2px solid rgb(44, 44, 44);\n}\n.divider{\n  width:1em;\n  height:auto;\n  display:inline-block;\n}\n</style>"]}]}